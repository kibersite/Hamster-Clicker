<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Хомяк-кликер: Покорми хомяка!</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', 'Segoe UI', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5e6d0, #e8c39e);
            color: #5a3e1b;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 20px;
            background-color: #f8d7a8;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(139, 87, 42, 0.2);
            margin-bottom: 30px;
            border: 5px dashed #d4a76a;
        }
        
        h1 {
            color: #8b572a;
            font-size: 2.8rem;
            text-shadow: 2px 2px 0 #f1c27d;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #7a4e23;
        }
        
        .hamster-evolution {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 15px;
            gap: 10px;
        }
        
        .evolution-stage {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #d4a76a;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            transition: all 0.3s;
        }
        
        .evolution-stage.active {
            background-color: #8b572a;
            transform: scale(1.1);
            box-shadow: 0 0 10px #8b572a;
        }
        
        .game-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
        }
        
        .hamster-section {
            flex: 1;
            min-width: 300px;
            background-color: #f8e5c9;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 20px rgba(139, 87, 42, 0.25);
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 6px solid #e0b87e;
        }
        
        .hamster-container {
            position: relative;
            margin: 20px 0;
        }
        
        .hamster {
            width: 280px;
            height: 280px;
            background-color: #f1c27d;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.1s, width 0.8s ease-out, height 0.8s ease-out;
            border: 10px solid #d4a76a;
            transform-origin: center;
        }
        
        /* Анимация нажатия */
        .hamster:active {
            animation: hamsterClick 0.3s ease-out;
        }
        
        @keyframes hamsterClick {
            0% { transform: scale(1); }
            50% { transform: scale(0.9); }
            100% { transform: scale(1); }
        }
        
        /* Анимация поедания */
        .hamster-eating {
            animation: eatingAnimation 0.6s ease-out;
        }
        
        @keyframes eatingAnimation {
            0% { transform: scale(1); }
            15% { transform: scale(0.95) translateY(5px); }
            30% { transform: scale(1.05) rotate(5deg); }
            45% { 
                transform: scale(0.98) rotate(-5deg); 
                border-color: #e8c39e;
            }
            60% { transform: scale(1.03) rotate(3deg); }
            75% { transform: scale(0.99) rotate(-3deg); }
            90% { transform: scale(1.01); }
            100% { transform: scale(1); }
        }
        
        /* Анимация жевания */
        .hamster-chewing .hamster-mouth {
            animation: chewingAnimation 0.3s infinite alternate;
        }
        
        @keyframes chewingAnimation {
            0% { height: 5px; }
            100% { height: 15px; }
        }
        
        /* Анимация довольного хомяка */
        .hamster-happy {
            animation: happyAnimation 0.5s ease-out;
        }
        
        @keyframes happyAnimation {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        /* Эволюции хомяка */
        .hamster.evolution-1 {
            width: 300px;
            height: 300px;
            background-color: #f0b366;
        }
        
        .hamster.evolution-2 {
            width: 320px;
            height: 320px;
            background-color: #eda554;
        }
        
        .hamster.evolution-3 {
            width: 340px;
            height: 340px;
            background-color: #ea9641;
        }
        
        .hamster.evolution-4 {
            width: 360px;
            height: 360px;
            background-color: #e6872e;
        }
        
        .hamster.evolution-5 {
            width: 380px;
            height: 380px;
            background-color: #e3781b;
        }
        
        .hamster.evolution-6 {
            width: 400px;
            height: 400px;
            background-color: #e06908;
            animation: happyPulse 2s infinite;
        }
        
        .hamster.evolution-7 {
            width: 420px;
            height: 420px;
            background-color: #dd5a00;
            animation: dangerPulse 2s infinite;
        }
        
        .hamster.evolution-8 {
            width: 450px;
            height: 450px;
            background-color: #ff0000;
            animation: explosionWarning 1s infinite;
            border-color: #ff5555;
        }
        
        @keyframes happyPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes dangerPulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(221, 90, 0, 0.7);
            }
            50% { 
                transform: scale(1.1);
                box-shadow: 0 0 30px 15px rgba(221, 90, 0, 0.5);
            }
        }
        
        @keyframes explosionWarning {
            0% { 
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7);
                background-color: #ff0000;
            }
            50% { 
                transform: scale(1.15);
                box-shadow: 0 0 40px 20px rgba(255, 0, 0, 0.8);
                background-color: #ff5555;
            }
            100% { 
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7);
                background-color: #ff0000;
            }
        }
        
        .hamster-face {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        .hamster-eye {
            position: absolute;
            width: 30px;
            height: 40px;
            background-color: #2c2c2c;
            border-radius: 50%;
            top: 80px;
            transition: all 0.8s ease-out;
        }
        
        /* Анимация глаз при еде */
        .hamster-eating .hamster-eye {
            animation: eyeBlink 0.6s ease-out;
        }
        
        @keyframes eyeBlink {
            0%, 100% { height: 40px; }
            25%, 75% { height: 5px; }
        }
        
        .hamster.evolution-4 .hamster-eye,
        .hamster.evolution-5 .hamster-eye {
            width: 25px;
            height: 35px;
            top: 90px;
        }
        
        .hamster.evolution-6 .hamster-eye,
        .hamster.evolution-7 .hamster-eye {
            width: 20px;
            height: 30px;
            top: 100px;
        }
        
        .hamster.evolution-8 .hamster-eye {
            width: 15px;
            height: 25px;
            top: 110px;
            background-color: #ff3333;
        }
        
        .left-eye {
            left: 70px;
        }
        
        .right-eye {
            right: 70px;
        }
        
        .hamster.evolution-1 .left-eye {
            left: 75px;
        }
        
        .hamster.evolution-1 .right-eye {
            right: 75px;
        }
        
        .hamster.evolution-2 .left-eye {
            left: 80px;
        }
        
        .hamster.evolution-2 .right-eye {
            right: 80px;
        }
        
        .hamster.evolution-3 .left-eye {
            left: 85px;
        }
        
        .hamster.evolution-3 .right-eye {
            right: 85px;
        }
        
        .hamster.evolution-4 .left-eye {
            left: 90px;
        }
        
        .hamster.evolution-4 .right-eye {
            right: 90px;
        }
        
        .hamster.evolution-5 .left-eye {
            left: 95px;
        }
        
        .hamster.evolution-5 .right-eye {
            right: 95px;
        }
        
        .hamster.evolution-6 .left-eye {
            left: 100px;
        }
        
        .hamster.evolution-6 .right-eye {
            right: 100px;
        }
        
        .hamster.evolution-7 .left-eye {
            left: 105px;
        }
        
        .hamster.evolution-7 .right-eye {
            right: 105px;
        }
        
        .hamster.evolution-8 .left-eye {
            left: 110px;
        }
        
        .hamster.evolution-8 .right-eye {
            right: 110px;
        }
        
        .hamster-nose {
            position: absolute;
            width: 25px;
            height: 15px;
            background-color: #ff8fa3;
            border-radius: 50%;
            top: 130px;
            left: 50%;
            transform: translateX(-50%);
            transition: all 0.8s ease-out;
            z-index: 3;
        }
        
        /* Анимация носа при еде */
        .hamster-eating .hamster-nose {
            animation: noseWiggle 0.6s ease-out;
        }
        
        @keyframes noseWiggle {
            0%, 100% { transform: translateX(-50%) scale(1); }
            25% { transform: translateX(-50%) scale(1.1) rotate(5deg); }
            50% { transform: translateX(-50%) scale(1) rotate(-5deg); }
            75% { transform: translateX(-50%) scale(1.05) rotate(3deg); }
        }
        
        .hamster.evolution-4 .hamster-nose,
        .hamster.evolution-5 .hamster-nose {
            top: 140px;
            width: 30px;
            height: 18px;
        }
        
        .hamster.evolution-6 .hamster-nose,
        .hamster.evolution-7 .hamster-nose {
            top: 150px;
            width: 35px;
            height: 20px;
        }
        
        .hamster.evolution-8 .hamster-nose {
            top: 160px;
            width: 40px;
            height: 22px;
            background-color: #ff6666;
        }
        
        /* Рот хомяка */
        .hamster-mouth {
            position: absolute;
            width: 40px;
            height: 5px;
            background-color: #8b572a;
            border-radius: 0 0 20px 20px;
            top: 145px;
            left: 50%;
            transform: translateX(-50%);
            transition: all 0.3s;
            z-index: 2;
            overflow: hidden;
        }
        
        /* Внутренность рта */
        .mouth-inside {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: #ff8fa3;
            border-radius: 0 0 20px 20px;
        }
        
        /* Язычок */
        .hamster-tongue {
            position: absolute;
            width: 15px;
            height: 8px;
            background-color: #ff6b8b;
            border-radius: 50%;
            bottom: -3px;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .hamster-eating .hamster-tongue {
            animation: tongueOut 0.6s ease-out;
        }
        
        @keyframes tongueOut {
            0%, 100% { 
                opacity: 0;
                transform: translateX(-50%) scale(0.5);
            }
            30%, 70% { 
                opacity: 1;
                transform: translateX(-50%) scale(1);
            }
        }
        
        .hamster.evolution-4 .hamster-mouth,
        .hamster.evolution-5 .hamster-mouth {
            top: 155px;
            width: 45px;
        }
        
        .hamster.evolution-6 .hamster-mouth,
        .hamster.evolution-7 .hamster-mouth {
            top: 165px;
            width: 50px;
        }
        
        .hamster.evolution-8 .hamster-mouth {
            top: 175px;
            width: 55px;
            background-color: #cc4400;
        }
        
        .hamster.evolution-8 .mouth-inside {
            background-color: #ff6666;
        }
        
        .hamster-ear {
            position: absolute;
            width: 40px;
            height: 60px;
            background-color: #d4a76a;
            border-radius: 50%;
            top: 10px;
            transition: all 0.8s ease-out;
        }
        
        /* Анимация ушей при еде */
        .hamster-eating .hamster-ear {
            animation: earTwitch 0.6s ease-out;
        }
        
        @keyframes earTwitch {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(10deg); }
            50% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }
        
        .hamster.evolution-4 .hamster-ear,
        .hamster.evolution-5 .hamster-ear {
            width: 35px;
            height: 50px;
            top: 15px;
        }
        
        .hamster.evolution-6 .hamster-ear,
        .hamster.evolution-7 .hamster-ear {
            width: 30px;
            height: 40px;
            top: 20px;
        }
        
        .hamster.evolution-8 .hamster-ear {
            width: 25px;
            height: 35px;
            top: 25px;
            background-color: #cc5500;
        }
        
        .left-ear {
            left: 60px;
            transform: rotate(-20deg);
        }
        
        .right-ear {
            right: 60px;
            transform: rotate(20deg);
        }
        
        .hamster.evolution-1 .left-ear {
            left: 65px;
        }
        
        .hamster.evolution-1 .right-ear {
            right: 65px;
        }
        
        .hamster.evolution-2 .left-ear {
            left: 70px;
        }
        
        .hamster.evolution-2 .right-ear {
            right: 70px;
        }
        
        .hamster.evolution-3 .left-ear {
            left: 75px;
        }
        
        .hamster.evolution-3 .right-ear {
            right: 75px;
        }
        
        .hamster.evolution-4 .left-ear {
            left: 80px;
        }
        
        .hamster.evolution-4 .right-ear {
            right: 80px;
        }
        
        .hamster.evolution-5 .left-ear {
            left: 85px;
        }
        
        .hamster.evolution-5 .right-ear {
            right: 85px;
        }
        
        .hamster.evolution-6 .left-ear {
            left: 90px;
        }
        
        .hamster.evolution-6 .right-ear {
            right: 90px;
        }
        
        .hamster.evolution-7 .left-ear {
            left: 95px;
        }
        
        .hamster.evolution-7 .right-ear {
            right: 95px;
        }
        
        .hamster.evolution-8 .left-ear {
            left: 100px;
        }
        
        .hamster.evolution-8 .right-ear {
            right: 100px;
        }
        
        .hamster-cheek {
            position: absolute;
            width: 50px;
            height: 30px;
            background-color: #f1a27d;
            border-radius: 50%;
            top: 130px;
            opacity: 0.6;
            transition: all 0.8s ease-out;
        }
        
        /* Анимация щек при еде */
        .hamster-eating .hamster-cheek {
            animation: cheekPuff 0.6s ease-out;
        }
        
        @keyframes cheekPuff {
            0%, 100% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.3); opacity: 0.8; }
        }
        
        .hamster.evolution-4 .hamster-cheek,
        .hamster.evolution-5 .hamster-cheek {
            width: 60px;
            height: 40px;
            top: 140px;
        }
        
        .hamster.evolution-6 .hamster-cheek,
        .hamster.evolution-7 .hamster-cheek {
            width: 70px;
            height: 50px;
            top: 150px;
        }
        
        .hamster.evolution-8 .hamster-cheek {
            width: 80px;
            height: 60px;
            top: 160px;
            background-color: #ff7777;
        }
        
        .left-cheek {
            left: 50px;
        }
        
        .right-cheek {
            right: 50px;
        }
        
        .hamster.evolution-1 .left-cheek {
            left: 55px;
        }
        
        .hamster.evolution-1 .right-cheek {
            right: 55px;
        }
        
        .hamster.evolution-2 .left-cheek {
            left: 60px;
        }
        
        .hamster.evolution-2 .right-cheek {
            right: 60px;
        }
        
        .hamster.evolution-3 .left-cheek {
            left: 65px;
        }
        
        .hamster.evolution-3 .right-cheek {
            right: 65px;
        }
        
        .hamster.evolution-4 .left-cheek {
            left: 70px;
        }
        
        .hamster.evolution-4 .right-cheek {
            right: 70px;
        }
        
        .hamster.evolution-5 .left-cheek {
            left: 75px;
        }
        
        .hamster.evolution-5 .right-cheek {
            right: 75px;
        }
        
        .hamster.evolution-6 .left-cheek {
            left: 80px;
        }
        
        .hamster.evolution-6 .right-cheek {
            right: 80px;
        }
        
        .hamster.evolution-7 .left-cheek {
            left: 85px;
        }
        
        .hamster.evolution-7 .right-cheek {
            right: 85px;
        }
        
        .hamster.evolution-8 .left-cheek {
            left: 90px;
        }
        
        .hamster.evolution-8 .right-cheek {
            right: 90px;
        }
        
        /* Лапки хомяка */
        .hamster-paw {
            position: absolute;
            width: 40px;
            height: 30px;
            background-color: #d4a76a;
            border-radius: 50%;
            z-index: 1;
            transition: all 0.3s;
        }
        
        .front-paw {
            bottom: 40px;
        }
        
        .back-paw {
            bottom: 30px;
            width: 45px;
            height: 35px;
        }
        
        .paw-left {
            left: 60px;
        }
        
        .paw-right {
            right: 60px;
        }
        
        /* Анимация лапок при еде */
        .hamster-eating .front-paw {
            animation: pawGrab 0.6s ease-out;
        }
        
        @keyframes pawGrab {
            0%, 100% { 
                transform: translateY(0) scale(1);
                bottom: 40px;
            }
            25% { 
                transform: translateY(-15px) scale(1.1);
                bottom: 55px;
            }
            50% { 
                transform: translateY(-10px) scale(1.05);
                bottom: 50px;
            }
            75% { 
                transform: translateY(-5px) scale(1.07);
                bottom: 45px;
            }
        }
        
        /* Семечка в лапке */
        .paw-seed {
            position: absolute;
            width: 15px;
            height: 10px;
            background-color: #8b572a;
            border-radius: 50% 50% 50% 0;
            transform: rotate(-45deg);
            top: -10px;
            left: 50%;
            transform: translateX(-50%) rotate(-45deg);
            opacity: 0;
        }
        
        .hamster-eating .paw-seed {
            animation: seedToMouth 0.6s ease-out;
        }
        
        @keyframes seedToMouth {
            0% { 
                opacity: 1;
                top: -10px;
                transform: translateX(-50%) rotate(-45deg) scale(0.5);
            }
            30% { 
                opacity: 1;
                top: -30px;
                transform: translateX(-50%) rotate(-45deg) scale(1);
            }
            60% { 
                opacity: 1;
                top: -50px;
                transform: translateX(-50%) rotate(-45deg) scale(0.8);
            }
            100% { 
                opacity: 0;
                top: -70px;
                transform: translateX(-50%) rotate(-45deg) scale(0.3);
            }
        }
        
        .click-counter {
            font-size: 1.8rem;
            font-weight: bold;
            color: #8b572a;
            background-color: #f1c27d;
            padding: 10px 25px;
            border-radius: 50px;
            margin-top: 15px;
            box-shadow: 0 4px 8px rgba(139, 87, 42, 0.3);
            border: 3px solid #d4a76a;
            transition: all 0.3s;
        }
        
        .click-counter.animate {
            animation: counterBounce 0.5s ease-out;
        }
        
        @keyframes counterBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .click-button {
            background-color: #8b572a;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.2s;
            box-shadow: 0 5px 0 #5a3e1b;
        }
        
        .click-button:hover {
            background-color: #a66b3c;
            transform: translateY(-3px);
            box-shadow: 0 8px 0 #5a3e1b;
        }
        
        .click-button:active {
            animation: buttonClick 0.2s ease-out;
        }
        
        @keyframes buttonClick {
            0% { transform: translateY(-3px); box-shadow: 0 8px 0 #5a3e1b; }
            50% { transform: translateY(2px); box-shadow: 0 2px 0 #5a3e1b; }
            100% { transform: translateY(-3px); box-shadow: 0 8px 0 #5a3e1b; }
        }
        
        .stats-section {
            flex: 1;
            min-width: 300px;
            background-color: #f8e5c9;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 20px rgba(139, 87, 42, 0.25);
            border: 6px solid #e0b87e;
        }
        
        .stats-title {
            text-align: center;
            font-size: 1.8rem;
            color: #8b572a;
            margin-bottom: 20px;
            border-bottom: 3px dashed #d4a76a;
            padding-bottom: 10px;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            background-color: #f5e6d0;
            margin-bottom: 15px;
            border-radius: 10px;
            border-left: 5px solid #d4a76a;
            transition: all 0.3s;
        }
        
        .stat-item.updated {
            background-color: #f1c27d;
            transform: scale(1.02);
        }
        
        .upgrades-section {
            flex: 1;
            min-width: 300px;
            background-color: #f8e5c9;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 20px rgba(139, 87, 42, 0.25);
            border: 6px solid #e0b87e;
        }
        
        .upgrade-item {
            background-color: #f5e6d0;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid #d4a76a;
            transition: all 0.3s;
        }
        
        .upgrade-item:hover {
            background-color: #f1c27d;
            transform: translateY(-3px);
        }
        
        .upgrade-item.disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .upgrade-item.purchased {
            background-color: #e8d7b5;
            border-color: #8b572a;
        }
        
        .upgrade-btn {
            background-color: #8b572a;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .upgrade-btn:hover:not(:disabled) {
            background-color: #a66b3c;
            transform: scale(1.05);
        }
        
        .upgrade-btn:active:not(:disabled) {
            animation: upgradeClick 0.2s ease-out;
        }
        
        @keyframes upgradeClick {
            0% { transform: scale(1.05); }
            50% { transform: scale(0.95); }
            100% { transform: scale(1.05); }
        }
        
        .upgrade-btn:disabled {
            background-color: #b5a99a;
            cursor: not-allowed;
        }
        
        .upgrade-icon {
            font-size: 1.5rem;
            margin-right: 10px;
            color: #8b572a;
            transition: all 0.3s;
        }
        
        .upgrade-item:hover .upgrade-icon {
            transform: scale(1.2) rotate(10deg);
        }
        
        .particles {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            top: 0;
            left: 0;
            z-index: 1;
        }
        
        .particle {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #f1c27d;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0.7;
        }
        
        .food-particle {
            background-color: #ff8fa3;
        }
        
        /* Анимация для семечек */
        .seed-animation {
            position: absolute;
            width: 25px;
            height: 25px;
            background-color: #8b572a;
            border-radius: 50% 50% 50% 0;
            transform: rotate(-45deg);
            animation: seedFly 1s ease-out forwards;
            z-index: 5;
        }
        
        @keyframes seedFly {
            0% {
                transform: translate(0, 0) rotate(-45deg) scale(0.5);
                opacity: 0;
            }
            20% {
                opacity: 1;
                transform: translate(var(--tx), var(--ty)) rotate(-45deg) scale(1);
            }
            80% {
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx-end), var(--ty-end)) rotate(-45deg) scale(0.5);
                opacity: 0;
            }
        }
        
        .achievements {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }
        
        .achievement {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #f8d7a8;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            border: 3px solid #d4a76a;
            opacity: 0.4;
            transition: all 0.3s;
        }
        
        .achievement.unlocked {
            opacity: 1;
            border-color: #8b572a;
            background-color: #f1c27d;
            transform: scale(1.1);
            animation: achievementUnlock 0.5s ease-out;
        }
        
        @keyframes achievementUnlock {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.3) rotate(180deg); }
            100% { transform: scale(1.1) rotate(360deg); }
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #7a4e23;
            font-size: 0.9rem;
            border-top: 2px dashed #d4a76a;
        }
        
        @media (max-width: 768px) {
            .game-container {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .hamster {
                width: 220px;
                height: 220px;
            }
            
            .hamster.evolution-8 {
                width: 300px;
                height: 300px;
            }
        }
        
        .click-effect {
            position: absolute;
            width: 40px;
            height: 40px;
            background-color: #ff8fa3;
            border-radius: 50%;
            pointer-events: none;
            animation: clickEffect 0.5s ease-out;
            z-index: 10;
        }
        
        @keyframes clickEffect {
            0% {
                transform: scale(0.5);
                opacity: 1;
            }
            100% {
                transform: scale(2);
                opacity: 0;
            }
        }
        
        @keyframes explode {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(3);
                opacity: 0;
            }
        }
        
        .confetti {
            position: absolute;
            width: 15px;
            height: 15px;
            background-color: var(--confetti-color);
            border-radius: 50%;
            pointer-events: none;
            z-index: 100;
            animation: confetti-fall 3s linear forwards;
        }
        
        .confetti.star {
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        }
        
        @keyframes confetti-fall {
            0% {
                transform: translateY(-100px) rotate(0deg) scale(0.5);
                opacity: 1;
            }
            100% {
                transform: translateY(1000px) rotate(720deg) scale(1);
                opacity: 0;
            }
        }
        
        .message {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background-color: #8b572a;
            color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transform: translateX(150%);
            transition: transform 0.5s;
        }
        
        .message.show {
            transform: translateX(0);
            animation: messagePulse 2s infinite;
        }
        
        @keyframes messagePulse {
            0%, 100% { transform: translateX(0) scale(1); }
            50% { transform: translateX(0) scale(1.05); }
        }
        
        .explosion-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }
        
        .explosion-message {
            background-color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            box-shadow: 0 0 30px rgba(255, 0, 0, 0.5);
            animation: explosionMessagePulse 1s infinite;
        }
        
        @keyframes explosionMessagePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .explosion-message h2 {
            color: #ff0000;
            font-size: 3rem;
            margin-bottom: 20px;
            animation: textColorChange 2s infinite;
        }
        
        @keyframes textColorChange {
            0% { color: #ff0000; }
            33% { color: #ff8800; }
            66% { color: #ffff00; }
            100% { color: #ff0000; }
        }
        
        .explosion-message p {
            font-size: 1.5rem;
            margin-bottom: 30px;
        }
        
        .restart-btn {
            background-color: #ff0000;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            animation: restartButtonPulse 2s infinite;
        }
        
        @keyframes restartButtonPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .restart-btn:hover {
            background-color: #cc0000;
            transform: scale(1.05);
        }
        
        /* Анимация для цифр при изменении */
        .number-change {
            animation: numberChange 0.5s ease-out;
        }
        
        @keyframes numberChange {
            0% { transform: scale(1); color: #5a3e1b; }
            50% { transform: scale(1.3); color: #8b572a; }
            100% { transform: scale(1); color: #5a3e1b; }
        }
        
        /* Анимация тряски для улучшений */
        .upgrade-shake {
            animation: upgradeShake 0.5s ease-out;
        }
        
        @keyframes upgradeShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        /* Анимация жевательных пузырьков */
        .chew-bubble {
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: #f1c27d;
            border-radius: 50%;
            opacity: 0;
            z-index: 4;
        }
        
        .hamster-eating .chew-bubble {
            animation: chewBubble 0.6s ease-out;
        }
        
        @keyframes chewBubble {
            0% {
                opacity: 0;
                transform: translate(0, 0) scale(0);
            }
            30% {
                opacity: 1;
                transform: translate(var(--bx), var(--by)) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--bx-end), var(--by-end)) scale(0.5);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-paw"></i> Хомяк-кликер</h1>
            <p class="subtitle">Покормите хомяка, нажимая на него, и зарабатывайте очки для покупки улучшений!</p>
            <div class="hamster-evolution">
                <div class="evolution-stage" id="stage-1">1</div>
                <div class="evolution-stage" id="stage-2">2</div>
                <div class="evolution-stage" id="stage-3">3</div>
                <div class="evolution-stage" id="stage-4">4</div>
                <div class="evolution-stage" id="stage-5">5</div>
                <div class="evolution-stage" id="stage-6">6</div>
                <div class="evolution-stage" id="stage-7">7</div>
                <div class="evolution-stage" id="stage-8">ВЗРЫВ!</div>
            </div>
        </header>
        
        <div class="game-container">
            <section class="hamster-section">
                <h2>Ваш хомяк</h2>
                <div class="hamster-container">
                    <div class="particles" id="particles-container"></div>
                    <div class="hamster" id="hamster">
                        <div class="hamster-face">
                            <!-- Уши -->
                            <div class="hamster-ear left-ear"></div>
                            <div class="hamster-ear right-ear"></div>
                            
                            <!-- Глаза -->
                            <div class="hamster-eye left-eye"></div>
                            <div class="hamster-eye right-eye"></div>
                            
                            <!-- Нос -->
                            <div class="hamster-nose"></div>
                            
                            <!-- Щеки -->
                            <div class="hamster-cheek left-cheek"></div>
                            <div class="hamster-cheek right-cheek"></div>
                            
                            <!-- Рот -->
                            <div class="hamster-mouth">
                                <div class="mouth-inside"></div>
                                <div class="hamster-tongue"></div>
                            </div>
                            
                            <!-- Лапки -->
                            <div class="hamster-paw front-paw paw-left">
                                <div class="paw-seed"></div>
                            </div>
                            <div class="hamster-paw front-paw paw-right">
                                <div class="paw-seed"></div>
                            </div>
                            <div class="hamster-paw back-paw paw-left"></div>
                            <div class="hamster-paw back-paw paw-right"></div>
                        </div>
                    </div>
                </div>
                <div class="click-counter" id="click-counter">Семечек: 0</div>
                <button class="click-button" id="click-button">Покормить хомяка!</button>
                <p style="margin-top: 15px; text-align: center; font-style: italic;">Кликайте на хомяка или используйте кнопку</p>
                <p style="margin-top: 10px; text-align: center; color: #8b572a; font-weight: bold;" id="evolution-info">Стадия эволюции: Обычный хомяк</p>
            </section>
            
            <section class="stats-section">
                <h2 class="stats-title">Статистика</h2>
                <div class="stat-item">
                    <span>Всего кликов:</span>
                    <span id="total-clicks">0</span>
                </div>
                <div class="stat-item">
                    <span>Семечек в секунду:</span>
                    <span id="cps">0</span>
                </div>
                <div class="stat-item">
                    <span>Уровень сытости:</span>
                    <span id="satiety-level">Голодный</span>
                </div>
                <div class="stat-item">
                    <span>Стадия хомяка:</span>
                    <span id="hamster-stage">Обычный</span>
                </div>
                <div class="stat-item">
                    <span>Куплено улучшений:</span>
                    <span id="upgrades-count">0</span>
                </div>
                <div class="stat-item">
                    <span>Рекорд:</span>
                    <span id="record">0</span>
                </div>
                
                <h2 class="stats-title" style="margin-top: 30px;">Достижения</h2>
                <div class="achievements">
                    <div class="achievement" id="ach1" title="Собрать 100 семечек"><i class="fas fa-seedling"></i></div>
                    <div class="achievement" id="ach2" title="Собрать 500 семечек"><i class="fas fa-award"></i></div>
                    <div class="achievement" id="ach3" title="Собрать 1000 семечек"><i class="fas fa-crown"></i></div>
                    <div class="achievement" id="ach4" title="Купить 5 улучшений"><i class="fas fa-star"></i></div>
                    <div class="achievement" id="ach5" title="Достичь 5000 кликов"><i class="fas fa-trophy"></i></div>
                    <div class="achievement" id="ach6" title="Взорвать хомяка"><i class="fas fa-bomb"></i></div>
                </div>
            </section>
            
            <section class="upgrades-section">
                <h2 class="stats-title">Улучшения</h2>
                <div class="upgrade-item" id="upgrade1">
                    <div>
                        <i class="fas fa-carrot upgrade-icon"></i>
                        <strong>Морковка</strong><br>
                        <small>+1 семечко за клик</small>
                    </div>
                    <button class="upgrade-btn" data-cost="10" data-cps="0" data-clickpower="1">Купить за 10</button>
                </div>
                <div class="upgrade-item" id="upgrade2">
                    <div>
                        <i class="fas fa-running upgrade-icon"></i>
                        <strong>Беговое колесо</strong><br>
                        <small>+2 семечка в секунду</small>
                    </div>
                    <button class="upgrade-btn" data-cost="50" data-cps="2" data-clickpower="0">Купить за 50</button>
                </div>
                <div class="upgrade-item" id="upgrade3">
                    <div>
                        <i class="fas fa-home upgrade-icon"></i>
                        <strong>Уютный домик</strong><br>
                        <small>+5 семечек в секунду</small>
                    </div>
                    <button class="upgrade-btn" data-cost="200" data-cps="5" data-clickpower="0">Купить за 200</button>
                </div>
                <div class="upgrade-item" id="upgrade4">
                    <div>
                        <i class="fas fa-utensils upgrade-icon"></i>
                        <strong>Миска с едой</strong><br>
                        <small>+3 семечка за клик</small>
                    </div>
                    <button class="upgrade-btn" data-cost="500" data-cps="0" data-clickpower="3">Купить за 500</button>
                </div>
                <div class="upgrade-item" id="upgrade5">
                    <div>
                        <i class="fas fa-user-friends upgrade-icon"></i>
                        <strong>Друг-хомяк</strong><br>
                        <small>+10 семечек в секунду</small>
                    </div>
                    <button class="upgrade-btn" data-cost="1500" data-cps="10" data-clickpower="0">Купить за 1500</button>
                </div>
                <div class="upgrade-item" id="upgrade6">
                    <div>
                        <i class="fas fa-gem upgrade-icon"></i>
                        <strong>Золотой хомяк</strong><br>
                        <small>+10 семечек за клик</small>
                    </div>
                    <button class="upgrade-btn" data-cost="5000" data-cps="0" data-clickpower="10">Купить за 5000</button>
                </div>
            </section>
        </div>
        
        <footer>
            <p>Хомяк-кликер &copy; 2023 | Игра создана для развлечения и тренировки кликов</p>
            <p>Чем больше вы кормите хомяка, тем счастливее он становится... или взрывается!</p>
        </footer>
    </div>
    
    <div class="explosion-overlay" id="explosion-overlay">
        <div class="explosion-message">
            <h2>БА-БАХ!</h2>
            <p>Хомяк не выдержал такого количества семечек и взорвался!</p>
            <p>Но не волнуйтесь, у вас уже есть <span id="final-seeds">0</span> семечек для нового хомяка!</p>
            <button class="restart-btn" id="restart-btn">Начать заново</button>
        </div>
    </div>
    
    <div class="message" id="message"></div>

    <script>
        // Игровые переменные
        let seeds = 0;
        let totalClicks = 0;
        let clickPower = 1;
        let cps = 0; // Семечек в секунду
        let upgradesCount = 0;
        let record = localStorage.getItem('hamsterRecord') || 0;
        let hamsterStage = 0; // Стадия эволюции хомяка (0-8)
        let exploded = false; // Взорвался ли хомяк
        let isEating = false; // Ест ли сейчас хомяк
        
        // Элементы DOM
        const hamster = document.getElementById('hamster');
        const clickButton = document.getElementById('click-button');
        const clickCounter = document.getElementById('click-counter');
        const totalClicksElement = document.getElementById('total-clicks');
        const cpsElement = document.getElementById('cps');
        const satietyLevelElement = document.getElementById('satiety-level');
        const hamsterStageElement = document.getElementById('hamster-stage');
        const evolutionInfoElement = document.getElementById('evolution-info');
        const upgradesCountElement = document.getElementById('upgrades-count');
        const recordElement = document.getElementById('record');
        const messageElement = document.getElementById('message');
        const particlesContainer = document.getElementById('particles-container');
        const explosionOverlay = document.getElementById('explosion-overlay');
        const finalSeedsElement = document.getElementById('final-seeds');
        const restartBtn = document.getElementById('restart-btn');
        const hamsterMouth = hamster.querySelector('.hamster-mouth');
        const hamsterTongue = hamster.querySelector('.hamster-tongue');
        const pawSeeds = hamster.querySelectorAll('.paw-seed');
        
        // Стадии эволюции хомяка
        const evolutionStages = [
            { clicks: 0, name: "Обычный хомяк" },
            { clicks: 100, name: "Сытый хомяк" },
            { clicks: 500, name: "Пухлый хомяк" },
            { clicks: 1000, name: "Толстый хомяк" },
            { clicks: 2000, name: "Очень толстый хомяк" },
            { clicks: 5000, name: "Гигантский хомяк" },
            { clicks: 10000, name: "Огромный хомяк-шарик" },
            { clicks: 15000, name: "Хомяк перед взрывом" }
        ];
        
        // Инициализация улучшений
        const upgrades = [
            { id: 'upgrade1', bought: false },
            { id: 'upgrade2', bought: false },
            { id: 'upgrade3', bought: false },
            { id: 'upgrade4', bought: false },
            { id: 'upgrade5', bought: false },
            { id: 'upgrade6', bought: false }
        ];
        
        // Инициализация достижений
        const achievements = [
            { id: 'ach1', unlocked: false, condition: () => seeds >= 100 },
            { id: 'ach2', unlocked: false, condition: () => seeds >= 500 },
            { id: 'ach3', unlocked: false, condition: () => seeds >= 1000 },
            { id: 'ach4', unlocked: false, condition: () => upgradesCount >= 5 },
            { id: 'ach5', unlocked: false, condition: () => totalClicks >= 5000 },
            { id: 'ach6', unlocked: false, condition: () => exploded }
        ];
        
        // Инициализация игры
        function initGame() {
            // Загрузка сохраненных данных
            const savedGame = localStorage.getItem('hamsterClicker');
            if (savedGame) {
                const gameData = JSON.parse(savedGame);
                seeds = gameData.seeds || 0;
                totalClicks = gameData.totalClicks || 0;
                clickPower = gameData.clickPower || 1;
                cps = gameData.cps || 0;
                upgradesCount = gameData.upgradesCount || 0;
                hamsterStage = gameData.hamsterStage || 0;
                exploded = gameData.exploded || false;
                
                // Если хомяк уже взорвался
                if (exploded) {
                    showExplosionMessage();
                }
                
                // Загрузка улучшений
                if (gameData.upgrades) {
                    gameData.upgrades.forEach((upgrade, index) => {
                        upgrades[index].bought = upgrade.bought;
                        if (upgrade.bought) {
                            const upgradeElement = document.getElementById(upgrades[index].id);
                            const btn = upgradeElement.querySelector('.upgrade-btn');
                            btn.textContent = 'Куплено';
                            btn.disabled = true;
                            upgradeElement.classList.add('disabled', 'purchased');
                        }
                    });
                }
                
                // Загрузка достижений
                if (gameData.achievements) {
                    gameData.achievements.forEach((achievement, index) => {
                        achievements[index].unlocked = achievement.unlocked;
                        if (achievement.unlocked) {
                            document.getElementById(achievements[index].id).classList.add('unlocked');
                        }
                    });
                }
            }
            
            // Установка рекорда
            recordElement.textContent = record;
            
            // Обновление стадии хомяка
            updateHamsterStage();
            
            // Обновление интерфейса
            updateUI();
            
            // Автоматический сбор семечек
            setInterval(autoCollect, 1000);
            
            // Автосохранение каждые 10 секунд
            setInterval(saveGame, 10000);
        }
        
        // Функция клика
        function handleClick() {
            // Если хомяк взорвался, не обрабатываем клики
            if (exploded) return;
            
            // Если хомяк уже ест, не запускаем новую анимацию
            if (isEating) return;
            
            // Устанавливаем флаг еды
            isEating = true;
            
            // Добавление семечек
            seeds += clickPower;
            totalClicks++;
            
            // Анимация поедания
            animateEating();
            
            // Проверка эволюции хомяка
            checkEvolution();
            
            // Обновление интерфейса
            updateUI();
            
            // Создание эффекта клика
            createClickEffect();
            
            // Создание частиц
            createParticles();
            
            // Проверка достижений
            checkAchievements();
            
            // Обновление рекорда
            if (seeds > record) {
                record = seeds;
                recordElement.textContent = record;
                localStorage.setItem('hamsterRecord', record);
            }
            
            // Сохранение игры
            saveGame();
            
            // Сбрасываем флаг еды после анимации
            setTimeout(() => {
                isEating = false;
                
                // Иногда добавляем анимацию довольного хомяка после еды
                if (Math.random() > 0.7) {
                    hamster.classList.add('hamster-happy');
                    setTimeout(() => {
                        hamster.classList.remove('hamster-happy');
                    }, 500);
                }
            }, 600);
        }
        
        // Анимация поедания
        function animateEating() {
            // Анимация хомяка
            hamster.classList.add('hamster-eating');
            
            // Анимация жевания (открывание-закрывание рта)
            hamsterMouth.style.height = '15px';
            
            // Показываем язык
            hamsterTongue.style.opacity = '1';
            
            // Анимация семечек в лапках
            pawSeeds.forEach(seed => {
                seed.style.opacity = '1';
            });
            
            // Создаем жевательные пузырьки
            createChewBubbles();
            
            // Убираем анимации после завершения
            setTimeout(() => {
                hamster.classList.remove('hamster-eating');
                hamsterMouth.style.height = '5px';
                hamsterTongue.style.opacity = '0';
                pawSeeds.forEach(seed => {
                    seed.style.opacity = '0';
                });
            }, 600);
        }
        
        // Создание жевательных пузырьков
        function createChewBubbles() {
            const hamsterRect = hamster.getBoundingClientRect();
            const mouthRect = hamsterMouth.getBoundingClientRect();
            
            // Создаем несколько пузырьков
            for (let i = 0; i < 3; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'chew-bubble';
                
                // Начальная позиция (возле рта)
                const startX = mouthRect.left + mouthRect.width / 2;
                const startY = mouthRect.top;
                
                // Случайное направление
                const angle = Math.random() * Math.PI - Math.PI/2; // Вверх и немного в стороны
                const distance = 30 + Math.random() * 40;
                
                const endX = Math.cos(angle) * distance;
                const endY = Math.sin(angle) * distance;
                
                bubble.style.left = startX + 'px';
                bubble.style.top = startY + 'px';
                
                // Устанавливаем переменные для анимации
                bubble.style.setProperty('--bx', (endX * 0.3) + 'px');
                bubble.style.setProperty('--by', (endY * 0.3) + 'px');
                bubble.style.setProperty('--bx-end', endX + 'px');
                bubble.style.setProperty('--by-end', endY + 'px');
                
                // Случайный размер
                const size = 3 + Math.random() * 5;
                bubble.style.width = size + 'px';
                bubble.style.height = size + 'px';
                
                // Случайный цвет
                const colors = ['#f1c27d', '#f0b366', '#ff8fa3'];
                bubble.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                
                document.body.appendChild(bubble);
                
                // Удаляем пузырек после анимации
                setTimeout(() => {
                    bubble.remove();
                }, 600);
            }
        }
        
        // Создание летящих семечек
        function createFlyingSeeds() {
            const hamsterRect = hamster.getBoundingClientRect();
            const counterRect = clickCounter.getBoundingClientRect();
            
            // Создаем несколько семечек
            for (let i = 0; i < clickPower; i++) {
                const seed = document.createElement('div');
                seed.className = 'seed-animation';
                
                // Начальная позиция (возле хомяка)
                const startX = hamsterRect.left + hamsterRect.width / 2;
                const startY = hamsterRect.top + hamsterRect.height / 2;
                
                // Конечная позиция (счетчик)
                const endX = counterRect.left + counterRect.width / 2;
                const endY = counterRect.top + counterRect.height / 2;
                
                // Случайное смещение для траектории
                const controlX = startX + (endX - startX) / 2 + (Math.random() - 0.5) * 100;
                const controlY = startY - 50 + (Math.random() - 0.5) * 50;
                
                // Устанавливаем начальную позицию
                seed.style.left = startX + 'px';
                seed.style.top = startY + 'px';
                
                // Создаем кривую Безье для плавной траектории
                seed.style.setProperty('--tx', (controlX - startX) + 'px');
                seed.style.setProperty('--ty', (controlY - startY) + 'px');
                seed.style.setProperty('--tx-end', (endX - controlX) + 'px');
                seed.style.setProperty('--ty-end', (endY - controlY) + 'px');
                
                document.body.appendChild(seed);
                
                // Удаляем семечко после анимации
                setTimeout(() => {
                    seed.remove();
                }, 1000);
            }
        }
        
        // Проверка эволюции хомяка
        function checkEvolution() {
            const oldStage = hamsterStage;
            
            // Определяем текущую стадию на основе количества кликов
            for (let i = evolutionStages.length - 1; i >= 0; i--) {
                if (totalClicks >= evolutionStages[i].clicks) {
                    hamsterStage = i;
                    break;
                }
            }
            
            // Если стадия изменилась
            if (oldStage !== hamsterStage) {
                // Анимация эволюции
                hamster.classList.add('hamster-evolve');
                
                // Обновляем стадию после начала анимации
                setTimeout(() => {
                    updateHamsterStage();
                    
                    // Если хомяк достиг последней стадии (15000 кликов) - взрыв!
                    if (hamsterStage === 7 && totalClicks >= 15000 && !exploded) {
                        setTimeout(() => {
                            explodeHamster();
                        }, 500);
                    } else if (hamsterStage > oldStage) {
                        // Показываем сообщение о новой стадии
                        showMessage(`Хомяк эволюционировал: ${evolutionStages[hamsterStage].name}!`);
                        
                        // Анимация довольного хомяка после эволюции
                        hamster.classList.add('hamster-happy');
                        setTimeout(() => {
                            hamster.classList.remove('hamster-happy');
                        }, 1000);
                    }
                }, 300);
                
                // Удаляем класс анимации после завершения
                setTimeout(() => {
                    hamster.classList.remove('hamster-evolve');
                }, 1000);
            }
        }
        
        // Обновление внешнего вида хомяка
        function updateHamsterStage() {
            // Удаляем все предыдущие классы эволюции
            hamster.classList.remove('evolution-1', 'evolution-2', 'evolution-3', 'evolution-4', 
                                    'evolution-5', 'evolution-6', 'evolution-7', 'evolution-8');
            
            // Добавляем текущий класс эволюции
            if (hamsterStage > 0) {
                hamster.classList.add(`evolution-${hamsterStage}`);
            }
            
            // Обновляем информацию о стадии
            hamsterStageElement.textContent = evolutionStages[hamsterStage].name;
            evolutionInfoElement.textContent = `Стадия эволюции: ${evolutionStages[hamsterStage].name}`;
            
            // Анимация текста стадии
            hamsterStageElement.classList.add('number-change');
            setTimeout(() => {
                hamsterStageElement.classList.remove('number-change');
            }, 500);
            
            // Обновляем индикаторы стадий
            for (let i = 1; i <= 8; i++) {
                const stageElement = document.getElementById(`stage-${i}`);
                if (i <= hamsterStage + 1) {
                    stageElement.classList.add('active');
                    // Анимация для активной стадии
                    if (i === hamsterStage + 1) {
                        stageElement.style.animation = 'pulse 1s';
                        setTimeout(() => {
                            stageElement.style.animation = '';
                        }, 1000);
                    }
                } else {
                    stageElement.classList.remove('active');
                }
            }
        }
        
        // Взрыв хомяка!
        function explodeHamster() {
            exploded = true;
            
            // Добавляем класс взрыва
            hamster.classList.add('evolution-8');
            
            // Показываем сообщение о взрыве
            setTimeout(() => {
                // Анимация взрыва
                hamster.style.animation = 'explode 1s forwards';
                
                // Создаем конфетти
                createConfetti();
                
                // Показываем экран взрыва
                setTimeout(() => {
                    showExplosionMessage();
                }, 1000);
                
                // Разблокируем достижение
                achievements[5].unlocked = true;
                document.getElementById('ach6').classList.add('unlocked');
                
                // Сохраняем игру
                saveGame();
            }, 1000);
        }
        
        // Создание конфетти при взрыве
        function createConfetti() {
            const colors = ['#ff0000', '#ff8800', '#ffff00', '#00ff00', '#0088ff', '#8800ff', '#ff00ff'];
            
            for (let i = 0; i < 200; i++) {
                const confetti = document.createElement('div');
                
                // Случайная форма
                if (Math.random() > 0.7) {
                    confetti.className = 'confetti star';
                } else {
                    confetti.className = 'confetti';
                }
                
                // Случайный цвет
                const color = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.setProperty('--confetti-color', color);
                
                // Случайная позиция
                const hamsterRect = hamster.getBoundingClientRect();
                const x = hamsterRect.left + hamsterRect.width / 2;
                const y = hamsterRect.top + hamsterRect.height / 2;
                
                confetti.style.left = x + 'px';
                confetti.style.top = y + 'px';
                
                // Случайный размер
                const size = 5 + Math.random() * 20;
                confetti.style.width = size + 'px';
                confetti.style.height = size + 'px';
                
                // Случайная длительность анимации
                const duration = 2 + Math.random() * 4;
                confetti.style.animationDuration = duration + 's';
                
                // Случайная задержка
                const delay = Math.random() * 2;
                confetti.style.animationDelay = delay + 's';
                
                document.body.appendChild(confetti);
                
                // Удаляем конфетти после анимации
                setTimeout(() => {
                    confetti.remove();
                }, (duration + delay) * 1000);
            }
        }
        
        // Показать сообщение о взрыве
        function showExplosionMessage() {
            finalSeedsElement.textContent = seeds;
            explosionOverlay.style.display = 'flex';
        }
        
        // Перезапуск игры после взрыва
        function restartGame() {
            // Сбрасываем состояние взрыва
            exploded = false;
            hamsterStage = 0;
            isEating = false;
            
            // Сбрасываем анимацию хомяка
            hamster.style.animation = '';
            hamster.classList.remove('evolution-8');
            hamster.classList.remove('hamster-eating', 'hamster-happy');
            
            // Сбрасываем рот и язык
            hamsterMouth.style.height = '5px';
            hamsterTongue.style.opacity = '0';
            
            // Сбрасываем семечки в лапках
            pawSeeds.forEach(seed => {
                seed.style.opacity = '0';
            });
            
            // Обновляем стадию хомяка
            updateHamsterStage();
            
            // Скрываем экран взрыва
            explosionOverlay.style.display = 'none';
            
            // Показываем сообщение
            showMessage('Новый хомяк готов к кормлению!');
            
            // Сохраняем игру
            saveGame();
        }
        
        // Создание визуального эффекта клика
        function createClickEffect() {
            const effect = document.createElement('div');
            effect.className = 'click-effect';
            effect.style.left = (event.clientX - 20) + 'px';
            effect.style.top = (event.clientY - 20) + 'px';
            document.body.appendChild(effect);
            
            setTimeout(() => {
                effect.remove();
            }, 500);
        }
        
        // Создание частиц при клике
        function createParticles() {
            for (let i = 0; i < 5; i++) {
                const particle = document.createElement('div');
                particle.className = Math.random() > 0.5 ? 'particle' : 'particle food-particle';
                
                // Случайная позиция вокруг хомяка
                const hamsterRect = hamster.getBoundingClientRect();
                const x = hamsterRect.left + hamsterRect.width / 2 + (Math.random() - 0.5) * 100;
                const y = hamsterRect.top + hamsterRect.height / 2 + (Math.random() - 0.5) * 100;
                
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                particle.style.transform = `scale(${Math.random() * 0.5 + 0.5})`;
                
                particlesContainer.appendChild(particle);
                
                // Анимация частицы
                const angle = Math.random() * Math.PI * 2;
                const speed = 2 + Math.random() * 3;
                const distance = 50 + Math.random() * 100;
                
                let currentDistance = 0;
                const interval = setInterval(() => {
                    currentDistance += speed;
                    particle.style.left = (x + Math.cos(angle) * currentDistance) + 'px';
                    particle.style.top = (y + Math.sin(angle) * currentDistance) + 'px';
                    particle.style.opacity = 1 - (currentDistance / distance);
                    
                    if (currentDistance >= distance) {
                        clearInterval(interval);
                        particle.remove();
                    }
                }, 16);
            }
        }
        
        // Автоматический сбор семечек
        function autoCollect() {
            if (cps > 0 && !exploded) {
                seeds += cps;
                updateUI();
                checkAchievements();
                saveGame();
            }
        }
        
        // Обновление интерфейса
        function updateUI() {
            // Анимация счетчика семечек
            clickCounter.classList.add('animate');
            setTimeout(() => {
                clickCounter.classList.remove('animate');
            }, 500);
            
            // Обновление счетчиков
            clickCounter.textContent = `Семечек: ${seeds}`;
            totalClicksElement.textContent = totalClicks;
            cpsElement.textContent = cps;
            upgradesCountElement.textContent = upgradesCount;
            
            // Анимация изменяющихся чисел
            [totalClicksElement, cpsElement, upgradesCountElement].forEach(el => {
                el.classList.add('number-change');
                setTimeout(() => {
                    el.classList.remove('number-change');
                }, 500);
            });
            
            // Обновление уровня сытости
            let satietyLevel = 'Голодный';
            if (seeds >= 1000) satietyLevel = 'Объевшийся';
            else if (seeds >= 500) satietyLevel = 'Сытый';
            else if (seeds >= 100) satietyLevel = 'Довольный';
            else if (seeds >= 50) satietyLevel = 'Немного сыт';
            else if (seeds >= 10) satietyLevel = 'Перекусил';
            
            satietyLevelElement.textContent = satietyLevel;
            
            // Анимация уровня сытости при изменении
            satietyLevelElement.classList.add('number-change');
            setTimeout(() => {
                satietyLevelElement.classList.remove('number-change');
            }, 500);
            
            // Обновление кнопок улучшений
            document.querySelectorAll('.upgrade-btn').forEach(btn => {
                const cost = parseInt(btn.getAttribute('data-cost'));
                const canAfford = seeds >= cost;
                const upgradeElement = btn.closest('.upgrade-item');
                
                btn.disabled = !canAfford || btn.textContent === 'Куплено' || exploded;
                
                // Анимация для доступных улучшений
                if (canAfford && btn.textContent !== 'Куплено' && !exploded) {
                    if (!upgradeElement.classList.contains('upgrade-shake')) {
                        upgradeElement.classList.add('upgrade-shake');
                        setTimeout(() => {
                            upgradeElement.classList.remove('upgrade-shake');
                        }, 500);
                    }
                }
            });
        }
        
        // Покупка улучшения
        function buyUpgrade(upgradeElement, index) {
            const btn = upgradeElement.querySelector('.upgrade-btn');
            const cost = parseInt(btn.getAttribute('data-cost'));
            const cpsBoost = parseInt(btn.getAttribute('data-cps'));
            const clickPowerBoost = parseInt(btn.getAttribute('data-clickpower'));
            
            if (seeds >= cost && !upgrades[index].bought && !exploded) {
                // Вычет стоимости
                seeds -= cost;
                
                // Применение улучшения
                cps += cpsBoost;
                clickPower += clickPowerBoost;
                upgradesCount++;
                
                // Отметка как купленного
                upgrades[index].bought = true;
                btn.textContent = 'Куплено';
                btn.disabled = true;
                upgradeElement.classList.add('disabled', 'purchased');
                
                // Анимация покупки
                upgradeElement.style.animation = 'purchaseUpgrade 0.5s ease-out';
                setTimeout(() => {
                    upgradeElement.style.animation = '';
                }, 500);
                
                // Показать сообщение
                showMessage(`Улучшение куплено! +${cpsBoost} семечек/сек, +${clickPowerBoost} семечек/клик`);
                
                // Обновление интерфейса
                updateUI();
                
                // Проверка достижений
                checkAchievements();
                
                // Сохранение игры
                saveGame();
            }
        }
        
        // Проверка достижений
        function checkAchievements() {
            achievements.forEach((achievement, index) => {
                if (!achievement.unlocked && achievement.condition()) {
                    achievement.unlocked = true;
                    const achievementElement = document.getElementById(achievement.id);
                    achievementElement.classList.add('unlocked');
                    showMessage(`Достижение разблокировано: ${achievementElement.getAttribute('title')}`);
                }
            });
        }
        
        // Показать сообщение
        function showMessage(text) {
            messageElement.textContent = text;
            messageElement.classList.add('show');
            
            setTimeout(() => {
                messageElement.classList.remove('show');
            }, 3000);
        }
        
        // Сохранение игры
        function saveGame() {
            const gameData = {
                seeds,
                totalClicks,
                clickPower,
                cps,
                upgradesCount,
                hamsterStage,
                exploded,
                upgrades,
                achievements
            };
            
            localStorage.setItem('hamsterClicker', JSON.stringify(gameData));
        }
        
        // Сброс игры
        function resetGame() {
            if (confirm('Вы уверены, что хотите сбросить игру? Все ваши достижения будут потеряны.')) {
                localStorage.removeItem('hamsterClicker');
                localStorage.removeItem('hamsterRecord');
                location.reload();
            }
        }
        
        // Обработчики событий
        hamster.addEventListener('click', handleClick);
        clickButton.addEventListener('click', handleClick);
        restartBtn.addEventListener('click', restartGame);
        
        // Обработчики для улучшений
        document.querySelectorAll('.upgrade-item').forEach((upgradeElement, index) => {
            const btn = upgradeElement.querySelector('.upgrade-btn');
            btn.addEventListener('click', () => buyUpgrade(upgradeElement, index));
        });
        
        // Добавление кнопки сброса в футер
        const footer = document.querySelector('footer');
        const resetBtn = document.createElement('button');
        resetBtn.textContent = 'Сбросить игру';
        resetBtn.style.marginTop = '10px';
        resetBtn.style.padding = '8px 15px';
        resetBtn.style.backgroundColor = '#8b572a';
        resetBtn.style.color = 'white';
        resetBtn.style.border = 'none';
        resetBtn.style.borderRadius = '5px';
        resetBtn.style.cursor = 'pointer';
        resetBtn.style.transition = 'all 0.3s';
        resetBtn.addEventListener('mouseover', () => {
            resetBtn.style.transform = 'scale(1.05)';
            resetBtn.style.backgroundColor = '#a66b3c';
        });
        resetBtn.addEventListener('mouseout', () => {
            resetBtn.style.transform = 'scale(1)';
            resetBtn.style.backgroundColor = '#8b572a';
        });
        resetBtn.addEventListener('click', resetGame);
        footer.appendChild(resetBtn);
        
        // Запуск игры при загрузке страницы
        window.addEventListener('load', initGame);
        
        // Добавление поддержки клавиши пробела для кликов
        document.addEventListener('keydown', (event) => {
            if (event.code === 'Space' && !exploded) {
                event.preventDefault();
                handleClick();
            }
        });
        
        // Анимация для улучшений при загрузке
        setTimeout(() => {
            document.querySelectorAll('.upgrade-item').forEach((item, i) => {
                setTimeout(() => {
                    item.style.opacity = '0';
                    item.style.transform = 'translateY(20px)';
                    setTimeout(() => {
                        item.style.transition = 'all 0.5s ease-out';
                        item.style.opacity = '1';
                        item.style.transform = 'translateY(0)';
                    }, 100);
                }, i * 100);
            });
        }, 500);
    </script>
</body>
</html>